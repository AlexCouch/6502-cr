<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.36.0">
<meta name="crystal_docs.project_version" content="master-dev">
<meta name="crystal_docs.project_name" content="6502-cr">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="6502-cr">
  <title>Instructions - 6502-cr master-dev</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          6502-cr
        </a>
      </h1>

      <span class="project-version">
        master-dev
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="6502-cr/CPU" data-name="cpu">
      <a href="CPU.html">CPU</a>
      
    </li>
  
  <li class=" current" data-id="6502-cr/Instructions" data-name="instructions">
      <a href="Instructions.html">Instructions</a>
      
    </li>
  
  <li class=" " data-id="6502-cr/Memory" data-name="memory">
      <a href="Memory.html">Memory</a>
      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">enum</span> Instructions

</h1>


















  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  



  
    <h2>
      <a id="enum-members" class="anchor" href="#enum-members">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
      Enum Members
    </h2>
  
  <dl>
    
      <dt class="entry-const" id="LDX_IMM">
        <strong>LDX_IMM</strong> = <code><span class="n">162_u8</span></code>
      </dt>
      
      <dd class="entry-const-doc">
        <p>This instruction will load a byte into the X register.</p>

<p>This instruction is 2 cycles and 2 bytes and operate as follows:</p>

<pre><code class="language-crystal"><span class="t">Cycle</span> <span class="n">1</span>: <span class="t">Fetch</span> <span class="t">Opcode</span>
<span class="t">Cycle</span> <span class="n">2</span>: <span class="t">Read</span> byte and load into <span class="t">X</span></code></pre>
      </dd>
      
    
      <dt class="entry-const" id="LDY_IMM">
        <strong>LDY_IMM</strong> = <code><span class="n">160_u8</span></code>
      </dt>
      
      <dd class="entry-const-doc">
        <p>This instruction will load a byte into the Y register.</p>

<p>This instruction is 2 cycles and 2 bytes and operate as follows:</p>

<pre><code class="language-crystal"><span class="t">Cycle</span> <span class="n">1</span>: <span class="t">Fetch</span> <span class="t">Opcode</span>
<span class="t">Cycle</span> <span class="n">2</span>: <span class="t">Read</span> byte and load into <span class="t">Y</span></code></pre>
      </dd>
      
    
      <dt class="entry-const" id="JSR">
        <strong>JSR</strong> = <code><span class="n">32_u8</span></code>
      </dt>
      
      <dd class="entry-const-doc">
        <p>This will read a word from the program and push the current program counter onto the stack then setting the program counter to the acquired word.</p>

<p>This instruction is 7 cycles and 3 bytes</p>

<p>Normally in the hardware, the lower byte read is called ADL
and the higher byte read is called ADH
In the hardware, we also have PCH (program counter high) and PCL (program counter low)
The hardware will spend two cycles to set the ADL->PCL and ADH->PCH</p>

<p>Vocabulary:</p>

<pre><code class="language-crystal">  <span class="t">ADL</span> : <span class="t">Target</span> <span class="t">Address</span> <span class="t">Low</span>
  <span class="t">ADH</span> : <span class="t">Target</span> <span class="t">Address</span> high
  <span class="t">PCL</span> : <span class="t">Program</span> <span class="t">Counter</span> low
  <span class="t">PCH</span> : <span class="t">Program</span> <span class="t">Counter</span> high
  <span class="t">AD</span>  : <span class="t">Target</span> <span class="t">Address</span>
  <span class="t">PC</span>  : <span class="t">Program</span> <span class="t">Counter</span></code></pre>

<p>So the hardware is really like this:</p>

<pre><code class="language-crystal">  <span class="t">Cycle</span> <span class="n">1</span>    <span class="t">Fetch</span> <span class="t">Opcode</span>
  <span class="t">Cycle</span> <span class="n">2</span>    <span class="t">Read</span> <span class="t">ADL</span>
  <span class="t">Cycle</span> <span class="n">3</span>    <span class="t">Push</span> <span class="t">PCH</span>
  <span class="t">Cycle</span> <span class="n">4</span>    <span class="t">Push</span> <span class="t">PCL</span>
  <span class="t">Cycle</span> <span class="n">5</span>    <span class="t">Fetch</span> <span class="t">ADH</span>
  <span class="t">Cycle</span> <span class="n">6</span>    <span class="t">ADL</span>-><span class="t">PCL</span>
  <span class="t">Cycle</span> <span class="n">7</span>    <span class="t">ADH</span>-><span class="t">PCH</span></code></pre>

<p>Source: http://archive.6502.org/datasheets/synertek_programming_manual.pdf p118</p>

<p>Our cycles are like this:</p>

<pre><code class="language-crystal"><span class="t">Cycle</span> <span class="n">1</span>    <span class="t">Fetch</span> <span class="t">Opcode</span>
<span class="t">Cycle</span> <span class="n">2</span>    <span class="t">Read</span> <span class="t">ADL</span>
<span class="t">Cycle</span> <span class="n">3</span>    <span class="t">Read</span> <span class="t">ADH</span>
<span class="t">Cycle</span> <span class="n">4</span>    <span class="t">AD</span> <span class="o">=</span> <span class="t">ADH</span> <span class="o">|</span> <span class="t">ADL</span>
<span class="t">Cycle</span> <span class="n">5</span>    <span class="t">Push</span> <span class="t">PCH</span>
<span class="t">Cycle</span> <span class="n">6</span>    <span class="t">Push</span> <span class="t">PCL</span>
<span class="t">Cycle</span> <span class="n">7</span>    <span class="t">AD</span>-><span class="t">PC</span></code></pre>
      </dd>
      
    
      <dt class="entry-const" id="RTS">
        <strong>RTS</strong> = <code><span class="n">96_u8</span></code>
      </dt>
      
      <dd class="entry-const-doc">
        <p>This will return from a subroutine by popping a word off the stack and setting the program counter to it + 1</p>

<p>This instruction is 6 cycles and 1 byte.</p>

<pre><code class="language-crystal"><span class="t">Cycle</span> <span class="n">1</span>    <span class="t">Fetch</span> <span class="t">Opcode</span>
<span class="t">Cycle</span> <span class="n">2</span>    <span class="t">Pop</span> <span class="t">ADL</span>
<span class="t">Cycle</span> <span class="n">3</span>    <span class="t">Pop</span> <span class="t">ADH</span>
<span class="t">Cycle</span> <span class="n">4</span>    <span class="t">AD</span> <span class="o">=</span> <span class="t">ADH</span> <span class="o">|</span> <span class="t">ADL</span>
<span class="t">Cycle</span> <span class="n">5</span>    <span class="t">AD</span>-><span class="t">PC</span>
<span class="t">Cycle</span> <span class="n">6</span>    <span class="t">PC</span>-><span class="t">PC</span><span class="n">+1</span></code></pre>
      </dd>
      
    
  </dl>







  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#jsr?-instance-method" class="signature"><strong>#jsr?</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#ldx_imm?-instance-method" class="signature"><strong>#ldx_imm?</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#ldy_imm?-instance-method" class="signature"><strong>#ldy_imm?</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#rts?-instance-method" class="signature"><strong>#rts?</strong></a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    


    


    


  
    


    


    


  
    


    


    


  
    


    


    


  
</div>






  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="jsr?-instance-method">
      <div class="signature">
        
        def <strong>jsr?</strong>

        <a class="method-permalink" href="#jsr?-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="ldx_imm?-instance-method">
      <div class="signature">
        
        def <strong>ldx_imm?</strong>

        <a class="method-permalink" href="#ldx_imm?-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="ldy_imm?-instance-method">
      <div class="signature">
        
        def <strong>ldy_imm?</strong>

        <a class="method-permalink" href="#ldy_imm?-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="rts?-instance-method">
      <div class="signature">
        
        def <strong>rts?</strong>

        <a class="method-permalink" href="#rts?-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  




</div>

</body>
</html>
